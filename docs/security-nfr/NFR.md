| ID | Название | Описание | Метрика/Порог | Проверка (чем/где) | Компонент | Приоритет |
|---|---|---|---|---|---|---|
| NFR-01 | Безопасное хранение паролей | Пароли пользователей должны хэшироваться с использованием современного, устойчивого к перебору алгоритма. | Алгоритм: Argon2id. Параметры: t=3, m=65536, p=4. | Unit-тест, проверяющий хэш пароля. | API (Auth) | High |
| NFR-02 | Контроль доступа (Owner-only) | Пользователь может изменять (PUT) или удалять (DELETE) только те ретроспективы, которые он сам создал. | 100% эндпоинтов `PUT/DELETE /retros/{id}` должны проверять авторство. | Интеграционные тесты (e2e). | API | High |
| NFR-03 | Производительность чтения списка | API должен быстро отдавать список ретроспектив, чтобы не ухудшать пользовательский опыт. | p95 времени ответа `GET /retros` ≤ 250 мс при нагрузке 20 RPS. | Нагрузочный тест (k6/JMeter). | API | Medium |
| NFR-04 | Производительность создания записи | Создание новой записи о ретроспективе должно быть быстрым и предсказуемым. | p95 времени ответа `POST /retros` ≤ 300 мс при нагрузке 20 RPS. | Нагрузочный тест (k6/JMeter). | API | Medium |
| NFR-05 | Валидация входных данных | Система должна отвергать некорректные данные на входе, например, даты из будущего. | 100% полей с датами проходят валидацию. Дата ретро не может быть в будущем. | Unit-тесты для API-эндпоинтов. | API | High |
| NFR-06 | Сканирование уязвимостей зависимостей | В проекте не должно быть зависимостей с известными уязвимостями высокого или критического уровня. | 0 High/Critical уязвимостей в зависимостях. | CI-сканер (trivy/dependency-check). | Build | High |
| NFR-07 | Ограничение частоты запросов (Rate Limiting) | Для защиты от атак перебором (brute-force) необходимо ограничить количество попыток входа в систему. | Не более 5 неудачных попыток входа с одного IP-адреса в минуту. | Интеграционные тесты (e2e). | API (Auth) | High |
| NFR-08 | Структурированное логирование | Важные события безопасности (вход, ошибка входа, отказ в доступе) должны логироваться в формате JSON для легкого анализа. | 100% событий безопасности логируются с `user_id`, `event_type`, `timestamp`. | Проверка логов на stage-среде. | API | Medium |
