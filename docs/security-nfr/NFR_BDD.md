Feature: Контроль доступа к ретроспективам (NFR-02)
  Scenario: Пользователь не может удалить чужую ретроспективу
    Given Пользователь "user_A" аутентифицирован
      And Существует ретроспектива с ID "123", созданная пользователем "user_B"
    When "user_A" отправляет запрос DELETE на эндпоинт "/retros/123"
    Then Система возвращает ошибку с кодом 403 (Forbidden)
      And Ретроспектива с ID "123" не удаляется из базы данных

Feature: Производительность чтения списка (NFR-03)
  Scenario: API быстро отдает список ретроспектив под нагрузкой
    Given В базе данных существует 1000 записей о ретроспективах
      And Система находится под нагрузкой в 20 запросов в секунду (RPS)
    When Запускается 5-минутный нагрузочный тест на эндпоинт GET "/retros"
    Then 95-й перцентиль (p95) времени ответа не превышает 250 миллисекунд

Feature: Сканирование уязвимостей зависимостей (NFR-06)
  Scenario: Сборка проекта прерывается при обнаружении критических уязвимостей
    Given Проект использует зависимость "log4j" версии "2.14.0" (уязвимая версия)
    When Запускается CI-пайплайн для ветки "feature/new-logger"
    Then CI-сканер обнаруживает критическую уязвимость (Log4Shell)
      And Шаг CI "Security Scan" завершается с ошибкой
      And Сборка проекта блокируется

Feature: Ограничение частоты запросов на вход (NFR-07)
  Scenario: (Негативный) Система блокирует пользователя после нескольких неудачных попыток входа
    Given Существует пользователь "user_X"
      And IP-адрес атакующего "10.20.30.40" не заблокирован
    When Атакующий отправляет 5 запросов POST на "/login" с неверным паролем для "user_X" с IP "10.20.30.40" в течение одной минуты
    Then Система возвращает ошибку 401 (Unauthorized) на каждый из 5 запросов
    When Атакующий отправляет 6-й запрос POST на "/login" с того же IP
    Then Система возвращает ошибку с кодом 429 (Too Many Requests)
